<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <!-- å…³é”®ï¼šè®¾ç½®è§†å£ä»¥é€‚é…ç§»åŠ¨ç«¯ -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Markdown è½¬ A4 (ç§»åŠ¨ç«¯é€‚é…ç‰ˆ)</title>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <style>
        /* ---------- å…¨å±€åŸºç¡€æ ·å¼ ---------- */
        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        body {
            margin: 0; padding: 0;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            background-color: #f0f2f5;
            height: 100vh;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        /* ---------- å¸ƒå±€å®¹å™¨ ---------- */
        .container {
            display: flex;
            width: 100%;
            height: 100%;
            position: relative;
        }

        /* ---------- å·¦ä¾§ï¼šç¼–è¾‘å™¨ ---------- */
        .editor-pane {
            width: 40%;
            height: 100%;
            display: flex;
            flex-direction: column;
            background: #2d2d2d;
            border-right: 1px solid #444;
            z-index: 10;
            transition: transform 0.3s ease;
        }

        .toolbar {
            padding: 10px 15px;
            background: #1e1e1e;
            color: #fff;
            display: flex;
            justify-content: space-between;
            align-items: center;
            height: 50px;
            flex-shrink: 0;
        }

        .toolbar h1 { margin: 0; font-size: 16px; font-weight: 500; }

        textarea {
            flex: 1;
            width: 100%;
            background: #2d2d2d;
            color: #e0e0e0;
            border: none;
            padding: 15px;
            resize: none;
            font-size: 16px; /* æ‰‹æœºä¸Š 16px é˜²æ­¢è¾“å…¥æ¡†ç¼©æ”¾ */
            line-height: 1.6;
            outline: none;
            font-family: 'Menlo', 'Monaco', 'Courier New', monospace;
        }

        /* ---------- å³ä¾§ï¼šé¢„è§ˆåŒº ---------- */
        .preview-pane {
            flex: 1;
            background: #525659;
            overflow: auto; /* å…è®¸æ»šåŠ¨ */
            display: flex;
            justify-content: center;
            padding: 30px 10px;
            position: relative;
        }

        /* A4 çº¸å¼ ç‰©ç†å°ºå¯¸ (ä¿æŒçœŸå®æ‰“å°å®½åº¦) */
        .a4-page {
            width: 210mm;
            min-height: 297mm;
            background: white;
            padding: 20mm;
            box-shadow: 0 4px 10px rgba(0,0,0,0.3);
            color: #000;
            /* æ‰‹æœºä¸Šå¦‚æœè§‰å¾—å¤ªå®½ï¼Œå…è®¸æ¨ªå‘æ»šåŠ¨æŸ¥çœ‹ï¼Œä¿è¯æ‰“å°ä¸€è‡´æ€§ */
            flex-shrink: 0; 
        }

        /* æŒ‰é’®æ ·å¼ */
        .btn {
            background-color: #007bff;
            color: white;
            border: none;
            padding: 6px 12px;
            border-radius: 4px;
            font-size: 14px;
            cursor: pointer;
        }

        /* ---------- ç§»åŠ¨ç«¯æ‚¬æµ®æŒ‰é’® (FAB) ---------- */
        .fab-toggle {
            display: none; /* æ¡Œé¢ç«¯éšè— */
            position: fixed;
            bottom: 20px;
            right: 20px;
            width: 56px;
            height: 56px;
            border-radius: 50%;
            background-color: #007bff;
            color: white;
            border: none;
            box-shadow: 0 4px 10px rgba(0,0,0,0.3);
            font-size: 24px;
            z-index: 100;
            justify-content: center;
            align-items: center;
            cursor: pointer;
        }

        /* ---------- å“åº”å¼è®¾è®¡ (æ‰‹æœºç«¯é€‚é…) ---------- */
        @media screen and (max-width: 768px) {
            .container {
                display: block; /* å–æ¶ˆ flexï¼Œæ”¹ä¸ºå †å ä½†é€šè¿‡æ˜¾éšæ§åˆ¶ */
            }

            .editor-pane, .preview-pane {
                width: 100%;
                height: 100%;
                position: absolute;
                top: 0;
                left: 0;
            }

            /* é»˜è®¤æ˜¾ç¤ºç¼–è¾‘å™¨ï¼Œéšè—é¢„è§ˆ */
            .preview-pane {
                transform: translateX(100%); /* ç§»å‡ºå±å¹• */
                transition: transform 0.3s ease;
                z-index: 20;
            }

            .editor-pane {
                z-index: 10;
            }

            /* æ¿€æ´»é¢„è§ˆæ¨¡å¼æ—¶çš„ç±» */
            body.show-preview .preview-pane {
                transform: translateX(0);
            }
            body.show-preview .editor-pane {
                /* å¯é€‰ï¼šè®©ç¼–è¾‘å™¨ç¨å¾®å˜æš—æˆ–ä¸åŠ¨ */
            }

            /* æ˜¾ç¤ºæ‚¬æµ®åˆ‡æ¢æŒ‰é’® */
            .fab-toggle {
                display: flex;
            }

            /* è°ƒæ•´æ‰‹æœºä¸Šçš„ A4 é¢„è§ˆä½“éªŒ */
            .preview-pane {
                padding: 10px; /* å‡å°‘èƒŒæ™¯é—´è· */
                align-items: flex-start; /* é¡¶éƒ¨å¯¹é½ */
                -webkit-overflow-scrolling: touch;
            }
            
            /* æ‰‹æœºä¸Šä¸ºäº†èƒ½çœ‹æ¸…å…¨è²Œï¼Œå…è®¸ A4 ç¼©å°ä¸€ç‚¹ç‚¹ï¼Œä½†æ‰“å°è¿˜æ˜¯æŒ‰ç…§å®é™…å°ºå¯¸ */
            /* å¦‚æœä¸éœ€è¦ç¼©å°ï¼Œä¿ç•™ horizontal scroll */
            .a4-page {
                transform-origin: top center;
            }
        }

        /* ---------- Markdown å†…å®¹æ ·å¼ ---------- */
        .markdown-body { line-height: 1.6; font-size: 11pt; }
        .markdown-body h1 { border-bottom: 2px solid #eaecef; padding-bottom: 0.3em; font-size: 2em; margin-top: 0; }
        .markdown-body h2 { border-bottom: 1px solid #eaecef; padding-bottom: 0.3em; font-size: 1.5em; }
        .markdown-body pre { background: #f6f8fa; padding: 10px; overflow: auto; border-radius: 4px; }
        .markdown-body code { font-family: monospace; background: rgba(27,31,35,0.05); padding: 2px 4px; border-radius: 3px; }
        .markdown-body table { border-collapse: collapse; width: 100%; margin-bottom: 1em; }
        .markdown-body th, .markdown-body td { border: 1px solid #dfe2e5; padding: 6px 13px; }
        .markdown-body img { max-width: 100%; }

        /* ---------- æ‰“å°æ ·å¼ (æœ€é«˜ä¼˜å…ˆçº§) ---------- */
        @media print {
            .editor-pane, .toolbar, .fab-toggle { display: none !important; }
            body, .container, .preview-pane {
                background: white; height: auto; width: 100%; display: block; overflow: visible; position: static;
            }
            .preview-pane { transform: none !important; padding: 0; margin: 0; }
            .a4-page {
                width: 100%; margin: 0; padding: 0; box-shadow: none; border: none;
                page-break-after: always;
            }
            @page { size: A4; margin: 20mm; } /* äº¤ç»™æµè§ˆå™¨æ§åˆ¶è¾¹è· */
            .markdown-body { padding: 0; } /* æ—¢ç„¶ @page æœ‰è¾¹è·ï¼Œè¿™é‡Œå°±ä¸è¦ padding äº† */
        }
    </style>
</head>
<body>

<div class="container">
    <!-- ç¼–è¾‘å™¨åŒºåŸŸ -->
    <div class="editor-pane">
        <div class="toolbar">
            <h1>ğŸ“ è¾“å…¥å†…å®¹</h1>
            <!-- æ¡Œé¢ç«¯çš„æ‰“å°æŒ‰é’® -->
            <button class="btn" onclick="window.print()">æ‰“å°/PDF</button>
        </div>
        <textarea id="markdown-input" placeholder="è¯·è¾“å…¥ Markdown..."></textarea>
    </div>

    <!-- é¢„è§ˆåŒºåŸŸ -->
    <div class="preview-pane">
        <!-- æ‰‹æœºé¢„è§ˆæ—¶çš„é¡¶éƒ¨æ ï¼Œç”¨äºè¿”å›æˆ–æ‰“å° -->
        <div class="toolbar" style="width: 100%; position: absolute; top:0; left:0; background: rgba(30,30,30,0.9); z-index: 50; display: none;" id="mobile-preview-bar">
            <h1>ğŸ“„ é¢„è§ˆæ•ˆæœ</h1>
            <button class="btn" onclick="window.print()">ğŸ–¨ï¸ æ‰“å°</button>
        </div>
        
        <div id="a4-output" class="a4-page markdown-body">
            <!-- å†…å®¹æ¸²æŸ“åŒº -->
        </div>
    </div>
</div>

<!-- ç§»åŠ¨ç«¯æ‚¬æµ®åˆ‡æ¢æŒ‰é’® -->
<button class="fab-toggle" id="toggle-btn" onclick="toggleView()">
    ğŸ‘ï¸
</button>

<script>
    const input = document.getElementById('markdown-input');
    const output = document.getElementById('a4-output');
    const body = document.body;
    const toggleBtn = document.getElementById('toggle-btn');
    const mobilePreviewBar = document.getElementById('mobile-preview-bar');

    // é»˜è®¤æ–‡æœ¬
    const defaultText = `# ç§»åŠ¨ç«¯/æ¡Œé¢ç«¯é€šç”¨ç‰ˆ

æ­¤ç‰ˆæœ¬å®Œç¾é€‚é…æ‰‹æœºæ“ä½œã€‚

## æ‰‹æœºç«¯æ“ä½œæŒ‡å—
1. ç‚¹å‡»å³ä¸‹è§’çš„ **"ğŸ‘ï¸"** æŒ‰é’®åˆ‡æ¢åˆ°é¢„è§ˆæ¨¡å¼ã€‚
2. åœ¨é¢„è§ˆæ¨¡å¼ä¸‹ï¼Œç‚¹å‡»å³ä¸Šè§’çš„ **"ğŸ–¨ï¸ æ‰“å°"**ã€‚
3. å¦‚æœçœ‹èµ·æ¥å­—å¾ˆå°ï¼Œå¯ä»¥åŒæŒ‡æ”¾å¤§æŸ¥çœ‹ã€‚
4. **å·¦å³æ»‘åŠ¨**é¢„è§ˆåŒºå¯ä»¥çœ‹åˆ°å®Œæ•´çš„ A4 çº¸å¼ å®½åº¦ã€‚

## ä¸ºä»€ä¹ˆé¢„è§ˆåŒºå¯ä»¥å·¦å³æ»‘ï¼Ÿ
ä¸ºäº†ä¿è¯æ‰“å°å‡ºæ¥çš„æ•ˆæœï¼ˆæ¢è¡Œä½ç½®ï¼‰å’Œä½ åœ¨å±å¹•ä¸Šçœ‹åˆ°çš„ä¸€æ¨¡ä¸€æ ·ï¼Œæˆ‘ä»¬ä¿æŒäº† A4 çº¸çš„çœŸå®ç‰©ç†å®½åº¦ã€‚

---

### è¡¨æ ¼æµ‹è¯•
| ID | åç§° | çŠ¶æ€ |
| :--- | :--- | :--- |
| 001 | æ‰‹æœºé€‚é… | âœ… å®Œæˆ |
| 002 | A4 å°ºå¯¸ | âœ… é”å®š |
| 003 | æ‰“å°æ ·å¼ | âœ… ä¼˜åŒ– |

### ä»£ç å—
\`\`\`js
function hello() {
  alert("é€‚é…æˆåŠŸï¼");
}
\`\`\`
`;

    input.value = defaultText;
    
    // æ¸²æŸ“å‡½æ•°
    function render() {
        output.innerHTML = marked.parse(input.value);
    }

    // ç›‘å¬è¾“å…¥
    input.addEventListener('input', render);

    // åˆå§‹åŒ–æ¸²æŸ“
    render();

    // ç§»åŠ¨ç«¯è§†å›¾åˆ‡æ¢é€»è¾‘
    function toggleView() {
        body.classList.toggle('show-preview');
        
        if (body.classList.contains('show-preview')) {
            // è¿›å…¥é¢„è§ˆæ¨¡å¼
            toggleBtn.innerHTML = 'âœï¸'; // å›¾æ ‡å˜ä¸ºç¬”
            if(window.innerWidth <= 768) {
                mobilePreviewBar.style.display = 'flex'; // æ˜¾ç¤ºé¢„è§ˆåŒºçš„æ‰“å°æ¡
            }
        } else {
            // è¿›å…¥ç¼–è¾‘æ¨¡å¼
            toggleBtn.innerHTML = 'ğŸ‘ï¸'; // å›¾æ ‡å˜ä¸ºçœ¼ç›
            mobilePreviewBar.style.display = 'none';
        }
    }

    // ç›‘å¬çª—å£å¤§å°å˜åŒ–ï¼Œä¿®æ­£å·¥å…·æ æ˜¾ç¤ºçŠ¶æ€
    window.addEventListener('resize', () => {
        if (window.innerWidth > 768) {
            mobilePreviewBar.style.display = 'none';
        } else if (body.classList.contains('show-preview')) {
            mobilePreviewBar.style.display = 'flex';
        }
    });
</script>

</body>
</html>
